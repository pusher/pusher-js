/*!
 * Pusher JavaScript Library v1.7.3
 * http://pusherapp.com/
 *
 * Copyright 2010, New Bamboo
 * Released under the MIT licence.
 */
/*
 * This library contains code with the following licences:
 *
 * web_socket.js:
 *
 *   Copyright: Hiroshi Ichikawa <http://gimite.net/en/>
 *   License: New BSD License
 *   Reference: http://dev.w3.org/html5/websockets/
 *   Reference: http://tools.ietf.org/html/draft-hixie-thewebsocketprotocol
 *
 * swfobject.js:
 *
 *   SWFObject v2.2 <http://code.google.com/p/swfobject/>
 *   is released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
 *
 * FABridge.js:
 *
 *   Copyright 2006 Adobe Systems Incorporated
 *
 *   Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"),
 *   to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense,
 *   and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
 *
 *   The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
 */

var swfobject=function(){function b(){if(!F){try{var a=m.getElementsByTagName("body")[0].appendChild(m.createElement("span"));a.parentNode.removeChild(a)}catch(d){return}F=true;a=K.length;for(var f=0;f<a;f++)K[f]()}}function e(a){if(F)a();else K[K.length]=a}function c(a){if(typeof v.addEventListener!=q)v.addEventListener("load",a,false);else if(typeof m.addEventListener!=q)m.addEventListener("load",a,false);else if(typeof v.attachEvent!=q)ba(v,"onload",a);else if(typeof v.onload=="function"){var d=
v.onload;v.onload=function(){d();a()}}else v.onload=a}function j(){var a=m.getElementsByTagName("body")[0],d=m.createElement(x);d.setAttribute("type",L);var f=a.appendChild(d);if(f){var g=0;(function(){if(typeof f.GetVariable!=q){var h=f.GetVariable("$version");if(h){h=h.split(" ")[1].split(",");i.pv=[parseInt(h[0],10),parseInt(h[1],10),parseInt(h[2],10)]}}else if(g<10){g++;setTimeout(arguments.callee,10);return}a.removeChild(d);f=null;k()})()}else k()}function k(){var a=B.length;if(a>0)for(var d=
0;d<a;d++){var f=B[d].id,g=B[d].callbackFn,h={success:false,id:f};if(i.pv[0]>0){var o=w(f);if(o)if(M(B[d].swfVersion)&&!(i.wk&&i.wk<312)){G(f,true);if(g){h.success=true;h.ref=p(f);g(h)}}else if(B[d].expressInstall&&t()){h={};h.data=B[d].expressInstall;h.width=o.getAttribute("width")||"0";h.height=o.getAttribute("height")||"0";if(o.getAttribute("class"))h.styleclass=o.getAttribute("class");if(o.getAttribute("align"))h.align=o.getAttribute("align");var n={};o=o.getElementsByTagName("param");for(var r=
o.length,s=0;s<r;s++)if(o[s].getAttribute("name").toLowerCase()!="movie")n[o[s].getAttribute("name")]=o[s].getAttribute("value");l(h,n,f,g)}else{u(o);g&&g(h)}}else{G(f,true);if(g){if((f=p(f))&&typeof f.SetVariable!=q){h.success=true;h.ref=f}g(h)}}}}function p(a){var d=null;if((a=w(a))&&a.nodeName=="OBJECT")if(typeof a.SetVariable!=q)d=a;else if(a=a.getElementsByTagName(x)[0])d=a;return d}function t(){return!N&&M("6.0.65")&&(i.win||i.mac)&&!(i.wk&&i.wk<312)}function l(a,d,f,g){N=true;T=g||null;V={success:false,
id:f};var h=w(f);if(h){if(h.nodeName=="OBJECT"){I=y(h);O=null}else{I=h;O=f}a.id=W;if(typeof a.width==q||!/%$/.test(a.width)&&parseInt(a.width,10)<310)a.width="310";if(typeof a.height==q||!/%$/.test(a.height)&&parseInt(a.height,10)<137)a.height="137";m.title=m.title.slice(0,47)+" - Flash Player Installation";g=i.ie&&i.win?"ActiveX":"PlugIn";g="MMredirectURL="+v.location.toString().replace(/&/g,"%26")+"&MMplayerType="+g+"&MMdoctitle="+m.title;if(typeof d.flashvars!=q)d.flashvars+="&"+g;else d.flashvars=
g;if(i.ie&&i.win&&h.readyState!=4){g=m.createElement("div");f+="SWFObjectNew";g.setAttribute("id",f);h.parentNode.insertBefore(g,h);h.style.display="none";(function(){h.readyState==4?h.parentNode.removeChild(h):setTimeout(arguments.callee,10)})()}C(a,d,f)}}function u(a){if(i.ie&&i.win&&a.readyState!=4){var d=m.createElement("div");a.parentNode.insertBefore(d,a);d.parentNode.replaceChild(y(a),d);a.style.display="none";(function(){a.readyState==4?a.parentNode.removeChild(a):setTimeout(arguments.callee,
10)})()}else a.parentNode.replaceChild(y(a),a)}function y(a){var d=m.createElement("div");if(i.win&&i.ie)d.innerHTML=a.innerHTML;else if(a=a.getElementsByTagName(x)[0])if(a=a.childNodes)for(var f=a.length,g=0;g<f;g++)!(a[g].nodeType==1&&a[g].nodeName=="PARAM")&&a[g].nodeType!=8&&d.appendChild(a[g].cloneNode(true));return d}function C(a,d,f){var g,h=w(f);if(i.wk&&i.wk<312)return g;if(h){if(typeof a.id==q)a.id=f;if(i.ie&&i.win){var o="",n;for(n in a)if(a[n]!=Object.prototype[n])if(n.toLowerCase()==
"data")d.movie=a[n];else if(n.toLowerCase()=="styleclass")o+=' class="'+a[n]+'"';else if(n.toLowerCase()!="classid")o+=" "+n+'="'+a[n]+'"';n="";for(var r in d)if(d[r]!=Object.prototype[r])n+='<param name="'+r+'" value="'+d[r]+'" />';h.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+o+">"+n+"</object>";P[P.length]=a.id;g=w(a.id)}else{r=m.createElement(x);r.setAttribute("type",L);for(var s in a)if(a[s]!=Object.prototype[s])if(s.toLowerCase()=="styleclass")r.setAttribute("class",
a[s]);else s.toLowerCase()!="classid"&&r.setAttribute(s,a[s]);for(o in d)if(d[o]!=Object.prototype[o]&&o.toLowerCase()!="movie"){a=r;n=o;s=d[o];f=m.createElement("param");f.setAttribute("name",n);f.setAttribute("value",s);a.appendChild(f)}h.parentNode.replaceChild(r,h);g=r}}return g}function X(a){var d=w(a);if(d&&d.nodeName=="OBJECT")if(i.ie&&i.win){d.style.display="none";(function(){if(d.readyState==4){var f=w(a);if(f){for(var g in f)if(typeof f[g]=="function")f[g]=null;f.parentNode.removeChild(f)}}else setTimeout(arguments.callee,
10)})()}else d.parentNode.removeChild(d)}function w(a){var d=null;try{d=m.getElementById(a)}catch(f){}return d}function ba(a,d,f){a.attachEvent(d,f);H[H.length]=[a,d,f]}function M(a){var d=i.pv;a=a.split(".");a[0]=parseInt(a[0],10);a[1]=parseInt(a[1],10)||0;a[2]=parseInt(a[2],10)||0;return d[0]>a[0]||d[0]==a[0]&&d[1]>a[1]||d[0]==a[0]&&d[1]==a[1]&&d[2]>=a[2]?true:false}function Y(a,d,f,g){if(!(i.ie&&i.mac)){var h=m.getElementsByTagName("head")[0];if(h){f=f&&typeof f=="string"?f:"screen";if(g)U=z=null;
if(!z||U!=f){g=m.createElement("style");g.setAttribute("type","text/css");g.setAttribute("media",f);z=h.appendChild(g);if(i.ie&&i.win&&typeof m.styleSheets!=q&&m.styleSheets.length>0)z=m.styleSheets[m.styleSheets.length-1];U=f}if(i.ie&&i.win)z&&typeof z.addRule==x&&z.addRule(a,d);else z&&typeof m.createTextNode!=q&&z.appendChild(m.createTextNode(a+" {"+d+"}"))}}}function G(a,d){if(Z){var f=d?"visible":"hidden";if(F&&w(a))w(a).style.visibility=f;else Y("#"+a,"visibility:"+f)}}function $(a){return/[\\\"<>\.;]/.exec(a)!=
null&&typeof encodeURIComponent!=q?encodeURIComponent(a):a}var q="undefined",x="object",L="application/x-shockwave-flash",W="SWFObjectExprInst",v=window,m=document,D=navigator,aa=false,K=[function(){aa?j():k()}],B=[],P=[],H=[],I,O,T,V,F=false,N=false,z,U,Z=true,i=function(){var a=typeof m.getElementById!=q&&typeof m.getElementsByTagName!=q&&typeof m.createElement!=q,d=D.userAgent.toLowerCase(),f=D.platform.toLowerCase(),g=f?/win/.test(f):/win/.test(d);f=f?/mac/.test(f):/mac/.test(d);d=/webkit/.test(d)?
parseFloat(d.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):false;var h=!+"\u000b1",o=[0,0,0],n=null;if(typeof D.plugins!=q&&typeof D.plugins["Shockwave Flash"]==x){if((n=D.plugins["Shockwave Flash"].description)&&!(typeof D.mimeTypes!=q&&D.mimeTypes[L]&&!D.mimeTypes[L].enabledPlugin)){aa=true;h=false;n=n.replace(/^.*\s+(\S+\s+\S+$)/,"$1");o[0]=parseInt(n.replace(/^(.*)\..*$/,"$1"),10);o[1]=parseInt(n.replace(/^.*\.(.*)\s.*$/,"$1"),10);o[2]=/[a-zA-Z]/.test(n)?parseInt(n.replace(/^.*[a-zA-Z]+(.*)$/,
"$1"),10):0}}else if(typeof v.ActiveXObject!=q)try{var r=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(r)if(n=r.GetVariable("$version")){h=true;n=n.split(" ")[1].split(",");o=[parseInt(n[0],10),parseInt(n[1],10),parseInt(n[2],10)]}}catch(s){}return{w3:a,pv:o,wk:d,ie:h,win:g,mac:f}}();(function(){if(i.w3){if(typeof m.readyState!=q&&m.readyState=="complete"||typeof m.readyState==q&&(m.getElementsByTagName("body")[0]||m.body))b();if(!F){typeof m.addEventListener!=q&&m.addEventListener("DOMContentLoaded",
b,false);if(i.ie&&i.win){m.attachEvent("onreadystatechange",function(){if(m.readyState=="complete"){m.detachEvent("onreadystatechange",arguments.callee);b()}});v==top&&function(){if(!F){try{m.documentElement.doScroll("left")}catch(a){setTimeout(arguments.callee,0);return}b()}}()}i.wk&&function(){F||(/loaded|complete/.test(m.readyState)?b():setTimeout(arguments.callee,0))}();c(b)}}})();(function(){i.ie&&i.win&&window.attachEvent("onunload",function(){for(var a=H.length,d=0;d<a;d++)H[d][0].detachEvent(H[d][1],
H[d][2]);a=P.length;for(d=0;d<a;d++)X(P[d]);for(var f in i)i[f]=null;i=null;for(var g in swfobject)swfobject[g]=null;swfobject=null})})();return{registerObject:function(a,d,f,g){if(i.w3&&a&&d){var h={};h.id=a;h.swfVersion=d;h.expressInstall=f;h.callbackFn=g;B[B.length]=h;G(a,false)}else g&&g({success:false,id:a})},getObjectById:function(a){if(i.w3)return p(a)},embedSWF:function(a,d,f,g,h,o,n,r,s,J){var Q={success:false,id:d};if(i.w3&&!(i.wk&&i.wk<312)&&a&&d&&f&&g&&h){G(d,false);e(function(){f+="";
g+="";var E={};if(s&&typeof s===x)for(var A in s)E[A]=s[A];E.data=a;E.width=f;E.height=g;A={};if(r&&typeof r===x)for(var R in r)A[R]=r[R];if(n&&typeof n===x)for(var S in n)if(typeof A.flashvars!=q)A.flashvars+="&"+S+"="+n[S];else A.flashvars=S+"="+n[S];if(M(h)){R=C(E,A,d);E.id==d&&G(d,true);Q.success=true;Q.ref=R}else if(o&&t()){E.data=o;l(E,A,d,J);return}else G(d,true);J&&J(Q)})}else J&&J(Q)},switchOffAutoHideShow:function(){Z=false},ua:i,getFlashPlayerVersion:function(){return{major:i.pv[0],minor:i.pv[1],
release:i.pv[2]}},hasFlashPlayerVersion:M,createSWF:function(a,d,f){if(i.w3)return C(a,d,f)},showExpressInstall:function(a,d,f,g){i.w3&&t()&&l(a,d,f,g)},removeSWF:function(a){i.w3&&X(a)},createCSS:function(a,d,f,g){i.w3&&Y(a,d,f,g)},addDomLoadEvent:e,addLoadEvent:c,getQueryParamValue:function(a){var d=m.location.search||m.location.hash;if(d){if(/\?/.test(d))d=d.split("?")[1];if(a==null)return $(d);d=d.split("&");for(var f=0;f<d.length;f++)if(d[f].substring(0,d[f].indexOf("="))==a)return $(d[f].substring(d[f].indexOf("=")+
1))}return""},expressInstallCallback:function(){if(N){var a=w(W);if(a&&I){a.parentNode.replaceChild(I,a);if(O){G(O,true);if(i.ie&&i.win)I.style.display="block"}T&&T(V)}N=false}}}}();function FABridge(b,e){this.target=b;this.remoteTypeCache={};this.remoteInstanceCache={};this.remoteFunctionCache={};this.localFunctionCache={};this.bridgeID=FABridge.nextBridgeID++;this.name=e;this.nextLocalFuncID=0;FABridge.instances[this.name]=this;FABridge.idMap[this.bridgeID]=this;return this}
FABridge.TYPE_ASINSTANCE=1;FABridge.TYPE_ASFUNCTION=2;FABridge.TYPE_JSFUNCTION=3;FABridge.TYPE_ANONYMOUS=4;FABridge.initCallbacks={};FABridge.userTypes={};FABridge.addToUserTypes=function(){for(var b=0;b<arguments.length;b++)FABridge.userTypes[arguments[b]]={typeName:arguments[b],enriched:false}};FABridge.argsToArray=function(b){for(var e=[],c=0;c<b.length;c++)e[c]=b[c];return e};function instanceFactory(b){this.fb_instance_id=b;return this}
function FABridge__invokeJSFunction(b){var e=b[0];b=b.concat();b.shift();return FABridge.extractBridgeFromID(e).invokeLocalFunction(e,b)}FABridge.addInitializationCallback=function(b,e){var c=FABridge.instances[b];if(c!=undefined)e.call(c);else{c=FABridge.initCallbacks[b];if(c==null)FABridge.initCallbacks[b]=c=[];c.push(e)}};
function FABridge__bridgeInitialized(b){var e=document.getElementsByTagName("object"),c=e.length,j=[];if(c>0)for(var k=0;k<c;k++)if(typeof e[k].SetVariable!="undefined")j[j.length]=e[k];c=document.getElementsByTagName("embed");k=c.length;e=[];if(k>0)for(var p=0;p<k;p++)if(typeof c[p].SetVariable!="undefined")e[e.length]=c[p];p=j.length;c=e.length;k="bridgeName="+b;if(p==1&&!c||p==1&&c==1)FABridge.attachBridge(j[0],b);else if(c==1&&!p)FABridge.attachBridge(e[0],b);else{var t=false;if(p>1)for(var l=
0;l<p;l++){for(var u=j[l].childNodes,y=0;y<u.length;y++){var C=u[y];if(C.nodeType==1&&C.tagName.toLowerCase()=="param"&&C.name.toLowerCase()=="flashvars"&&C.value.indexOf(k)>=0){FABridge.attachBridge(j[l],b);t=true;break}}if(t)break}if(!t&&c>1)for(j=0;j<c;j++)if(e[j].attributes.getNamedItem("flashVars").nodeValue.indexOf(k)>=0){FABridge.attachBridge(e[j],b);break}}return true}FABridge.nextBridgeID=0;FABridge.instances={};FABridge.idMap={};FABridge.refCount=0;
FABridge.extractBridgeFromID=function(b){return FABridge.idMap[b>>16]};FABridge.attachBridge=function(b,e){var c=new FABridge(b,e);FABridge[e]=c;var j=FABridge.initCallbacks[e];if(j!=null){for(var k=0;k<j.length;k++)j[k].call(c);delete FABridge.initCallbacks[e]}};FABridge.blockedMethods={toString:true,get:true,set:true,call:true};
FABridge.prototype={root:function(){return this.deserialize(this.target.getRoot())},releaseASObjects:function(){return this.target.releaseASObjects()},releaseNamedASObject:function(b){return typeof b!="object"?false:this.target.releaseNamedASObject(b.fb_instance_id)},create:function(b){return this.deserialize(this.target.create(b))},makeID:function(b){return(this.bridgeID<<16)+b},getPropertyFromAS:function(b,e){if(FABridge.refCount>0)throw Error("You are trying to call recursively into the Flash Player which is not allowed. In most cases the JavaScript setTimeout function, can be used as a workaround.");
else{FABridge.refCount++;retVal=this.target.getPropFromAS(b,e);retVal=this.handleError(retVal);FABridge.refCount--;return retVal}},setPropertyInAS:function(b,e,c){if(FABridge.refCount>0)throw Error("You are trying to call recursively into the Flash Player which is not allowed. In most cases the JavaScript setTimeout function, can be used as a workaround.");else{FABridge.refCount++;retVal=this.target.setPropInAS(b,e,this.serialize(c));retVal=this.handleError(retVal);FABridge.refCount--;return retVal}},
callASFunction:function(b,e){if(FABridge.refCount>0)throw Error("You are trying to call recursively into the Flash Player which is not allowed. In most cases the JavaScript setTimeout function, can be used as a workaround.");else{FABridge.refCount++;retVal=this.target.invokeASFunction(b,this.serialize(e));retVal=this.handleError(retVal);FABridge.refCount--;return retVal}},callASMethod:function(b,e,c){if(FABridge.refCount>0)throw Error("You are trying to call recursively into the Flash Player which is not allowed. In most cases the JavaScript setTimeout function, can be used as a workaround.");
else{FABridge.refCount++;c=this.serialize(c);retVal=this.target.invokeASMethod(b,e,c);retVal=this.handleError(retVal);FABridge.refCount--;return retVal}},invokeLocalFunction:function(b,e){var c,j=this.localFunctionCache[b];if(j!=undefined)c=this.serialize(j.apply(null,this.deserialize(e)));return c},getTypeFromName:function(b){return this.remoteTypeCache[b]},createProxy:function(b,e){var c=this.getTypeFromName(e);instanceFactory.prototype=c;c=new instanceFactory(b);return this.remoteInstanceCache[b]=
c},getProxy:function(b){return this.remoteInstanceCache[b]},addTypeDataToCache:function(b){newType=new ASProxy(this,b.name);for(var e=b.accessors,c=0;c<e.length;c++)this.addPropertyToType(newType,e[c]);b=b.methods;for(c=0;c<b.length;c++)FABridge.blockedMethods[b[c]]==undefined&&this.addMethodToType(newType,b[c]);return this.remoteTypeCache[newType.typeName]=newType},addPropertyToType:function(b,e){var c=e.charAt(0),j;if(c>="a"&&c<="z"){j="get"+c.toUpperCase()+e.substr(1);c="set"+c.toUpperCase()+e.substr(1)}else{j=
"get"+e;c="set"+e}b[c]=function(k){this.bridge.setPropertyInAS(this.fb_instance_id,e,k)};b[j]=function(){return this.bridge.deserialize(this.bridge.getPropertyFromAS(this.fb_instance_id,e))}},addMethodToType:function(b,e){b[e]=function(){return this.bridge.deserialize(this.bridge.callASMethod(this.fb_instance_id,e,FABridge.argsToArray(arguments)))}},getFunctionProxy:function(b){var e=this;if(this.remoteFunctionCache[b]==null)this.remoteFunctionCache[b]=function(){e.callASFunction(b,FABridge.argsToArray(arguments))};
return this.remoteFunctionCache[b]},getFunctionID:function(b){if(b.__bridge_id__==undefined){b.__bridge_id__=this.makeID(this.nextLocalFuncID++);this.localFunctionCache[b.__bridge_id__]=b}return b.__bridge_id__},serialize:function(b){var e={},c=typeof b;if(c=="number"||c=="string"||c=="boolean"||c==null||c==undefined)e=b;else if(b instanceof Array){e=[];for(c=0;c<b.length;c++)e[c]=this.serialize(b[c])}else if(c=="function"){e.type=FABridge.TYPE_JSFUNCTION;e.value=this.getFunctionID(b)}else if(b instanceof
ASProxy){e.type=FABridge.TYPE_ASINSTANCE;e.value=b.fb_instance_id}else{e.type=FABridge.TYPE_ANONYMOUS;e.value=b}return e},deserialize:function(b){var e,c=typeof b;if(c=="number"||c=="string"||c=="boolean"||b==null||b==undefined)e=this.handleError(b);else if(b instanceof Array){e=[];for(c=0;c<b.length;c++)e[c]=this.deserialize(b[c])}else if(c=="object"){for(c=0;c<b.newTypes.length;c++)this.addTypeDataToCache(b.newTypes[c]);for(var j in b.newRefs)this.createProxy(j,b.newRefs[j]);if(b.type==FABridge.TYPE_PRIMITIVE)e=
b.value;else if(b.type==FABridge.TYPE_ASFUNCTION)e=this.getFunctionProxy(b.value);else if(b.type==FABridge.TYPE_ASINSTANCE)e=this.getProxy(b.value);else if(b.type==FABridge.TYPE_ANONYMOUS)e=b.value}return e},addRef:function(b){this.target.incRef(b.fb_instance_id)},release:function(b){this.target.releaseRef(b.fb_instance_id)},handleError:function(b){if(typeof b=="string"&&b.indexOf("__FLASHERROR")==0){b=b.split("||");FABridge.refCount>0&&FABridge.refCount--;throw Error(b[1]);}return b}};
ASProxy=function(b,e){this.bridge=b;this.typeName=e;return this};ASProxy.prototype={get:function(b){return this.bridge.deserialize(this.bridge.getPropertyFromAS(this.fb_instance_id,b))},set:function(b,e){this.bridge.setPropertyInAS(this.fb_instance_id,b,e)},call:function(b,e){this.bridge.callASMethod(this.fb_instance_id,b,e)},addRef:function(){this.bridge.addRef(this)},release:function(){this.bridge.release(this)}};
(function(){function b(){}if(!window.WebSocket){var e=window.console;if(!e||!e.log||!e.error)e={log:function(){},error:function(){}};if(function(){if("navigator"in window&&"plugins"in navigator&&navigator.plugins["Shockwave Flash"])return!!navigator.plugins["Shockwave Flash"].description;if("ActiveXObject"in window)try{return!!(new ActiveXObject("ShockwaveFlash.ShockwaveFlash")).GetVariable("$version")}catch(c){}return false}()){e.log(location.protocol);location.protocol=="file:"&&e.error("web-socket-js doesn't work in file:///... URL (without special configuration). Open the page via Web server i.e. http://...");
WebSocket=function(c,j,k,p,t){var l=this;l.readyState=WebSocket.CONNECTING;l.bufferedAmount=0;setTimeout(function(){WebSocket.__addTask(function(){l.__createFlash(c,j,k,p,t)})},1)};WebSocket.prototype.__createFlash=function(c,j,k,p,t){var l=this;l.__flash=WebSocket.__flash.create(c,j,k||null,p||0,t||null);l.__flash.addEventListener("open",function(){try{l.readyState=l.__flash.getReadyState();l.__timer&&clearInterval(l.__timer);if(window.opera)l.__timer=setInterval(function(){l.__handleMessages()},
500);l.onopen&&l.onopen()}catch(u){e.error(u.toString())}});l.__flash.addEventListener("close",function(){try{l.readyState=l.__flash.getReadyState();l.__timer&&clearInterval(l.__timer);l.onclose&&l.onclose()}catch(u){e.error(u.toString())}});l.__flash.addEventListener("message",function(){try{l.__handleMessages()}catch(u){e.error(u.toString())}});l.__flash.addEventListener("error",function(){try{l.__timer&&clearInterval(l.__timer);l.onerror&&l.onerror()}catch(u){e.error(u.toString())}});l.__flash.addEventListener("stateChange",
function(u){try{l.readyState=l.__flash.getReadyState();l.bufferedAmount=u.getBufferedAmount()}catch(y){e.error(y.toString())}})};WebSocket.prototype.send=function(c){if(this.__flash)this.readyState=this.__flash.getReadyState();if(!this.__flash||this.readyState==WebSocket.CONNECTING)throw"INVALID_STATE_ERR: Web Socket connection has not been established";c=this.__flash.send(encodeURIComponent(c));if(c<0)return true;else{this.bufferedAmount=c;return false}};WebSocket.prototype.close=function(){if(this.__flash){this.readyState=
this.__flash.getReadyState();if(this.readyState==WebSocket.OPEN){this.__flash.close();this.readyState=WebSocket.CLOSED;this.__timer&&clearInterval(this.__timer);this.onclose&&this.onclose()}}};WebSocket.prototype.addEventListener=function(c,j){if(!("__events"in this))this.__events={};if(!(c in this.__events)){this.__events[c]=[];if("function"==typeof this["on"+c]){this.__events[c].defaultHandler=this["on"+c];this["on"+c]=this.__createEventHandler(this,c)}}this.__events[c].push(j)};WebSocket.prototype.removeEventListener=
function(c,j){if(!("__events"in this))this.__events={};if(c in this.__events)for(var k=this.__events.length;k>-1;--k)if(j===this.__events[c][k]){this.__events[c].splice(k,1);break}};WebSocket.prototype.dispatchEvent=function(c){if(!("__events"in this))throw"UNSPECIFIED_EVENT_TYPE_ERR";if(!(c.type in this.__events))throw"UNSPECIFIED_EVENT_TYPE_ERR";for(var j=0,k=this.__events[c.type].length;j<k;++j){this.__events[c.type][j](c);if(c.cancelBubble)break}false!==c.returnValue&&"function"==typeof this.__events[c.type].defaultHandler&&
this.__events[c.type].defaultHandler(c)};WebSocket.prototype.__handleMessages=function(){for(var c=this.__flash.readSocketData(),j=0;j<c.length;j++){var k=decodeURIComponent(c[j]);try{if(this.onmessage){var p;if(window.MessageEvent){p=document.createEvent("MessageEvent");p.initMessageEvent("message",false,false,k,null,null,window,null)}else p={data:k};this.onmessage(p)}}catch(t){e.error(t.toString())}}};WebSocket.prototype.__createEventHandler=function(c,j){return function(k){var p=new b;p.initEvent(j,
true,true);p.target=p.currentTarget=c;for(var t in k)p[t]=k[t];c.dispatchEvent(p,arguments)}};b.prototype.cancelable=true;b.prototype.cancelBubble=false;b.prototype.preventDefault=function(){if(this.cancelable)this.returnValue=false};b.prototype.stopPropagation=function(){this.cancelBubble=true};b.prototype.initEvent=function(c,j,k){this.type=c;this.cancelable=k;this.timeStamp=new Date};WebSocket.CONNECTING=0;WebSocket.OPEN=1;WebSocket.CLOSING=2;WebSocket.CLOSED=3;WebSocket.__tasks=[];WebSocket.__initialize=
function(){if(WebSocket.__swfLocation)window.WEB_SOCKET_SWF_LOCATION=WebSocket.__swfLocation;if(window.WEB_SOCKET_SWF_LOCATION){var c=document.createElement("div");c.id="webSocketContainer";c.style.position="absolute";c.style.left="-100px";c.style.top="-100px";var j=document.createElement("div");j.id="webSocketFlash";c.appendChild(j);document.body.appendChild(c);swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION,"webSocketFlash","8","8","9.0.0",null,{bridgeName:"webSocket"},{allowScriptAccess:"always"},null,
function(k){k.success||e.error("[WebSocket] swfobject.embedSWF failed")});FABridge.addInitializationCallback("webSocket",function(){try{WebSocket.__flash=FABridge.webSocket.root();WebSocket.__flash.setCallerUrl(location.href);WebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);for(var k=0;k<WebSocket.__tasks.length;++k)WebSocket.__tasks[k]();WebSocket.__tasks=[]}catch(p){e.error("[WebSocket] "+p.toString())}})}else e.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf")};
WebSocket.__addTask=function(c){WebSocket.__flash?c():WebSocket.__tasks.push(c)};window.webSocketLog=function(c){e.log(decodeURIComponent(c))};window.webSocketError=function(c){e.error(decodeURIComponent(c))};window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION||(window.addEventListener?window.addEventListener("load",WebSocket.__initialize,false):window.attachEvent("onload",WebSocket.__initialize))}else e.error("Flash Player is not installed.")}})();
