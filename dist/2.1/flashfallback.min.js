/*!
 * Pusher JavaScript Library v2.1.3
 * http://pusherapp.com/
 *
 * Copyright 2011, Pusher
 * Released under the MIT licence.
 */
/*
 * This library contains code with the following licences:
 *
 * web_socket.js:
 *
 *   Copyright: Hiroshi Ichikawa <http://gimite.net/en/>
 *   License: New BSD License
 *   Reference: http://dev.w3.org/html5/websockets/
 *   Reference: http://tools.ietf.org/html/draft-hixie-thewebsocketprotocol
 *
 * swfobject.js:
 *
 *   SWFObject v2.2 <http://code.google.com/p/swfobject/>
 *   is released under the MIT License <http://www.opensource.org/licenses/mit-license.php>
 *
 * FABridge.js:
 *
 *   Copyright 2006 Adobe Systems Incorporated
 *
 *   Permission is hereby granted, free of charge, to any person obtaining a copy of this software and associated documentation files (the "Software"),
 *   to deal in the Software without restriction, including without limitation the rights to use, copy, modify, merge, publish, distribute, sublicense,
 *   and/or sell copies of the Software, and to permit persons to whom the Software is furnished to do so, subject to the following conditions:
 *
 *   The above copyright notice and this permission notice shall be included in all copies or substantial portions of the Software.
 */

var swfobject=function(){function i(){if(!x){try{var b=d.getElementsByTagName("body")[0].appendChild(d.createElement("span"));b.parentNode.removeChild(b)}catch(f){return}x=!0;for(var b=C.length,j=0;j<b;j++)C[j]()}}function a(b){x?b():C[C.length]=b}function c(b){if(typeof p.addEventListener!=l)p.addEventListener("load",b,!1);else if(typeof d.addEventListener!=l)d.addEventListener("load",b,!1);else if(typeof p.attachEvent!=l)U(p,"onload",b);else if(typeof p.onload=="function"){var f=p.onload;p.onload=
function(){f();b()}}else p.onload=b}function k(){var b=d.getElementsByTagName("body")[0],f=d.createElement(s);f.setAttribute("type",D);var j=b.appendChild(f);if(j){var a=0;(function(){if(typeof j.GetVariable!=l){var g=j.GetVariable("$version");if(g)g=g.split(" ")[1].split(","),e.pv=[parseInt(g[0],10),parseInt(g[1],10),parseInt(g[2],10)]}else if(a<10){a++;setTimeout(arguments.callee,10);return}b.removeChild(f);j=null;u()})()}else u()}function u(){var b=v.length;if(b>0)for(var f=0;f<b;f++){var j=v[f].id,
a=v[f].callbackFn,g={success:!1,id:j};if(e.pv[0]>0){var d=q(j);if(d)if(E(v[f].swfVersion)&&!(e.wk&&e.wk<312)){if(y(j,!0),a)g.success=!0,g.ref=A(j),a(g)}else if(v[f].expressInstall&&r()){g={};g.data=v[f].expressInstall;g.width=d.getAttribute("width")||"0";g.height=d.getAttribute("height")||"0";if(d.getAttribute("class"))g.styleclass=d.getAttribute("class");if(d.getAttribute("align"))g.align=d.getAttribute("align");for(var c={},d=d.getElementsByTagName("param"),n=d.length,o=0;o<n;o++)d[o].getAttribute("name").toLowerCase()!=
"movie"&&(c[d[o].getAttribute("name")]=d[o].getAttribute("value"));I(g,c,j,a)}else V(d),a&&a(g)}else if(y(j,!0),a){if((j=A(j))&&typeof j.SetVariable!=l)g.success=!0,g.ref=j;a(g)}}}function A(b){var f=null;if((b=q(b))&&b.nodeName=="OBJECT")typeof b.SetVariable!=l?f=b:(b=b.getElementsByTagName(s)[0])&&(f=b);return f}function r(){return!F&&E("6.0.65")&&(e.win||e.mac)&&!(e.wk&&e.wk<312)}function I(b,f,a,m){F=!0;J=m||null;N={success:!1,id:a};var g=q(a);if(g){g.nodeName=="OBJECT"?(B=K(g),G=null):(B=g,G=
a);b.id=O;if(typeof b.width==l||!/%$/.test(b.width)&&parseInt(b.width,10)<310)b.width="310";if(typeof b.height==l||!/%$/.test(b.height)&&parseInt(b.height,10)<137)b.height="137";d.title=d.title.slice(0,47)+" - Flash Player Installation";m=e.ie&&e.win?"ActiveX":"PlugIn";m="MMredirectURL="+p.location.toString().replace(/&/g,"%26")+"&MMplayerType="+m+"&MMdoctitle="+d.title;typeof f.flashvars!=l?f.flashvars+="&"+m:f.flashvars=m;if(e.ie&&e.win&&g.readyState!=4)m=d.createElement("div"),a+="SWFObjectNew",
m.setAttribute("id",a),g.parentNode.insertBefore(m,g),g.style.display="none",function(){g.readyState==4?g.parentNode.removeChild(g):setTimeout(arguments.callee,10)}();L(b,f,a)}}function V(b){if(e.ie&&e.win&&b.readyState!=4){var f=d.createElement("div");b.parentNode.insertBefore(f,b);f.parentNode.replaceChild(K(b),f);b.style.display="none";(function(){b.readyState==4?b.parentNode.removeChild(b):setTimeout(arguments.callee,10)})()}else b.parentNode.replaceChild(K(b),b)}function K(b){var f=d.createElement("div");
if(e.win&&e.ie)f.innerHTML=b.innerHTML;else if(b=b.getElementsByTagName(s)[0])if(b=b.childNodes)for(var a=b.length,m=0;m<a;m++)!(b[m].nodeType==1&&b[m].nodeName=="PARAM")&&b[m].nodeType!=8&&f.appendChild(b[m].cloneNode(!0));return f}function L(b,f,a){var m,g=q(a);if(e.wk&&e.wk<312)return m;if(g){if(typeof b.id==l)b.id=a;if(e.ie&&e.win){var c="",h;for(h in b)if(b[h]!=Object.prototype[h])h.toLowerCase()=="data"?f.movie=b[h]:h.toLowerCase()=="styleclass"?c+=' class="'+b[h]+'"':h.toLowerCase()!="classid"&&
(c+=" "+h+'="'+b[h]+'"');h="";for(var n in f)f[n]!=Object.prototype[n]&&(h+='<param name="'+n+'" value="'+f[n]+'" />');g.outerHTML='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"'+c+">"+h+"</object>";H[H.length]=b.id;m=q(b.id)}else{n=d.createElement(s);n.setAttribute("type",D);for(var o in b)b[o]!=Object.prototype[o]&&(o.toLowerCase()=="styleclass"?n.setAttribute("class",b[o]):o.toLowerCase()!="classid"&&n.setAttribute(o,b[o]));for(c in f)f[c]!=Object.prototype[c]&&c.toLowerCase()!=
"movie"&&(b=n,h=c,o=f[c],a=d.createElement("param"),a.setAttribute("name",h),a.setAttribute("value",o),b.appendChild(a));g.parentNode.replaceChild(n,g);m=n}}return m}function P(b){var f=q(b);if(f&&f.nodeName=="OBJECT")e.ie&&e.win?(f.style.display="none",function(){if(f.readyState==4){var a=q(b);if(a){for(var d in a)typeof a[d]=="function"&&(a[d]=null);a.parentNode.removeChild(a)}}else setTimeout(arguments.callee,10)}()):f.parentNode.removeChild(f)}function q(b){var f=null;try{f=d.getElementById(b)}catch(a){}return f}
function U(b,f,a){b.attachEvent(f,a);z[z.length]=[b,f,a]}function E(b){var a=e.pv,b=b.split(".");b[0]=parseInt(b[0],10);b[1]=parseInt(b[1],10)||0;b[2]=parseInt(b[2],10)||0;return a[0]>b[0]||a[0]==b[0]&&a[1]>b[1]||a[0]==b[0]&&a[1]==b[1]&&a[2]>=b[2]?!0:!1}function Q(b,a,j,c){if(!e.ie||!e.mac){var g=d.getElementsByTagName("head")[0];if(g){j=j&&typeof j=="string"?j:"screen";c&&(M=t=null);if(!t||M!=j)c=d.createElement("style"),c.setAttribute("type","text/css"),c.setAttribute("media",j),t=g.appendChild(c),
e.ie&&e.win&&typeof d.styleSheets!=l&&d.styleSheets.length>0&&(t=d.styleSheets[d.styleSheets.length-1]),M=j;e.ie&&e.win?t&&typeof t.addRule==s&&t.addRule(b,a):t&&typeof d.createTextNode!=l&&t.appendChild(d.createTextNode(b+" {"+a+"}"))}}}function y(b,a){if(R){var c=a?"visible":"hidden";x&&q(b)?q(b).style.visibility=c:Q("#"+b,"visibility:"+c)}}function S(b){return/[\\\"<>\.;]/.exec(b)!=null&&typeof encodeURIComponent!=l?encodeURIComponent(b):b}var l="undefined",s="object",D="application/x-shockwave-flash",
O="SWFObjectExprInst",p=window,d=document,w=navigator,T=!1,C=[function(){T?k():u()}],v=[],H=[],z=[],B,G,J,N,x=!1,F=!1,t,M,R=!0,e=function(){var b=typeof d.getElementById!=l&&typeof d.getElementsByTagName!=l&&typeof d.createElement!=l,a=w.userAgent.toLowerCase(),c=w.platform.toLowerCase(),e=c?/win/.test(c):/win/.test(a),c=c?/mac/.test(c):/mac/.test(a),a=/webkit/.test(a)?parseFloat(a.replace(/^.*webkit\/(\d+(\.\d+)?).*$/,"$1")):!1,g=!+"\u000b1",k=[0,0,0],h=null;if(typeof w.plugins!=l&&typeof w.plugins["Shockwave Flash"]==
s){if((h=w.plugins["Shockwave Flash"].description)&&!(typeof w.mimeTypes!=l&&w.mimeTypes[D]&&!w.mimeTypes[D].enabledPlugin))T=!0,g=!1,h=h.replace(/^.*\s+(\S+\s+\S+$)/,"$1"),k[0]=parseInt(h.replace(/^(.*)\..*$/,"$1"),10),k[1]=parseInt(h.replace(/^.*\.(.*)\s.*$/,"$1"),10),k[2]=/[a-zA-Z]/.test(h)?parseInt(h.replace(/^.*[a-zA-Z]+(.*)$/,"$1"),10):0}else if(typeof p.ActiveXObject!=l)try{var n=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");if(n&&(h=n.GetVariable("$version")))g=!0,h=h.split(" ")[1].split(","),
k=[parseInt(h[0],10),parseInt(h[1],10),parseInt(h[2],10)]}catch(o){}return{w3:b,pv:k,wk:a,ie:g,win:e,mac:c}}();(function(){e.w3&&((typeof d.readyState!=l&&d.readyState=="complete"||typeof d.readyState==l&&(d.getElementsByTagName("body")[0]||d.body))&&i(),x||(typeof d.addEventListener!=l&&d.addEventListener("DOMContentLoaded",i,!1),e.ie&&e.win&&(d.attachEvent("onreadystatechange",function(){d.readyState=="complete"&&(d.detachEvent("onreadystatechange",arguments.callee),i())}),p==top&&function(){if(!x){try{d.documentElement.doScroll("left")}catch(b){setTimeout(arguments.callee,
0);return}i()}}()),e.wk&&function(){x||(/loaded|complete/.test(d.readyState)?i():setTimeout(arguments.callee,0))}(),c(i)))})();(function(){e.ie&&e.win&&window.attachEvent("onunload",function(){for(var b=z.length,a=0;a<b;a++)z[a][0].detachEvent(z[a][1],z[a][2]);b=H.length;for(a=0;a<b;a++)P(H[a]);for(var c in e)e[c]=null;e=null;for(var d in swfobject)swfobject[d]=null;swfobject=null})})();return{registerObject:function(b,a,c,d){if(e.w3&&b&&a){var g={};g.id=b;g.swfVersion=a;g.expressInstall=c;g.callbackFn=
d;v[v.length]=g;y(b,!1)}else d&&d({success:!1,id:b})},getObjectById:function(a){if(e.w3)return A(a)},embedSWF:function(b,f,c,d,g,k,h,n,o,i){var p={success:!1,id:f};e.w3&&!(e.wk&&e.wk<312)&&b&&f&&c&&d&&g?(y(f,!1),a(function(){c+="";d+="";var a={};if(o&&typeof o===s)for(var e in o)a[e]=o[e];a.data=b;a.width=c;a.height=d;e={};if(n&&typeof n===s)for(var u in n)e[u]=n[u];if(h&&typeof h===s)for(var q in h)typeof e.flashvars!=l?e.flashvars+="&"+q+"="+h[q]:e.flashvars=q+"="+h[q];if(E(g))u=L(a,e,f),a.id==
f&&y(f,!0),p.success=!0,p.ref=u;else if(k&&r()){a.data=k;I(a,e,f,i);return}else y(f,!0);i&&i(p)})):i&&i(p)},switchOffAutoHideShow:function(){R=!1},ua:e,getFlashPlayerVersion:function(){return{major:e.pv[0],minor:e.pv[1],release:e.pv[2]}},hasFlashPlayerVersion:E,createSWF:function(a,f,c){if(e.w3)return L(a,f,c)},showExpressInstall:function(a,f,c,d){e.w3&&r()&&I(a,f,c,d)},removeSWF:function(a){e.w3&&P(a)},createCSS:function(a,c,d,k){e.w3&&Q(a,c,d,k)},addDomLoadEvent:a,addLoadEvent:c,getQueryParamValue:function(a){var c=
d.location.search||d.location.hash;if(c){/\?/.test(c)&&(c=c.split("?")[1]);if(a==null)return S(c);for(var c=c.split("&"),e=0;e<c.length;e++)if(c[e].substring(0,c[e].indexOf("="))==a)return S(c[e].substring(c[e].indexOf("=")+1))}return""},expressInstallCallback:function(){if(F){var a=q(O);if(a&&B){a.parentNode.replaceChild(B,a);if(G&&(y(G,!0),e.ie&&e.win))B.style.display="block";J&&J(N)}F=!1}}}}();
(function(){var i;i=window.WEB_SOCKET_LOGGER?WEB_SOCKET_LOGGER:window.console&&window.console.log&&window.console.error?window.console:{log:function(){},error:function(){}};if(!(swfobject.getFlashPlayerVersion().major<10))location.protocol=="file:"&&i.error("WARNING: web-socket-js doesn't work in file:///... URL unless you set Flash Security Settings properly. Open the page via Web server i.e. http://..."),window.FlashWebSocket=function(a,c,k,i,A){var r=this;r.__id=FlashWebSocket.__nextId++;FlashWebSocket.__instances[r.__id]=
r;r.readyState=FlashWebSocket.CONNECTING;r.bufferedAmount=0;r.__events={};c?typeof c=="string"&&(c=[c]):c=[];r.__createTask=setTimeout(function(){FlashWebSocket.__addTask(function(){r.__createTask=null;FlashWebSocket.__flash.create(r.__id,a,c,k||null,i||0,A||null)})},0)},FlashWebSocket.prototype.send=function(a){if(this.readyState==FlashWebSocket.CONNECTING)throw"INVALID_STATE_ERR: Web Socket connection has not been established";a=FlashWebSocket.__flash.send(this.__id,encodeURIComponent(a));return a<
0?!0:(this.bufferedAmount+=a,!1)},FlashWebSocket.prototype.close=function(){if(this.__createTask)clearTimeout(this.__createTask),this.__createTask=null,this.readyState=FlashWebSocket.CLOSED;else if(!(this.readyState==FlashWebSocket.CLOSED||this.readyState==FlashWebSocket.CLOSING))this.readyState=FlashWebSocket.CLOSING,FlashWebSocket.__flash.close(this.__id)},FlashWebSocket.prototype.addEventListener=function(a,c){a in this.__events||(this.__events[a]=[]);this.__events[a].push(c)},FlashWebSocket.prototype.removeEventListener=
function(a,c){if(a in this.__events)for(var k=this.__events[a],i=k.length-1;i>=0;--i)if(k[i]===c){k.splice(i,1);break}},FlashWebSocket.prototype.dispatchEvent=function(a){for(var c=this.__events[a.type]||[],k=0;k<c.length;++k)c[k](a);(c=this["on"+a.type])&&c.apply(this,[a])},FlashWebSocket.prototype.__handleEvent=function(a){if("readyState"in a)this.readyState=a.readyState;if("protocol"in a)this.protocol=a.protocol;var c;if(a.type=="open"||a.type=="error")c=this.__createSimpleEvent(a.type);else if(a.type==
"close")c=this.__createSimpleEvent("close"),c.wasClean=a.wasClean?!0:!1,c.code=a.code,c.reason=a.reason;else if(a.type=="message")c=this.__createMessageEvent("message",decodeURIComponent(a.message));else throw"unknown event type: "+a.type;this.dispatchEvent(c)},FlashWebSocket.prototype.__createSimpleEvent=function(a){if(document.createEvent&&window.Event){var c=document.createEvent("Event");c.initEvent(a,!1,!1);return c}else return{type:a,bubbles:!1,cancelable:!1}},FlashWebSocket.prototype.__createMessageEvent=
function(a,c){if(document.createEvent&&window.MessageEvent&&!window.opera){var k=document.createEvent("MessageEvent");k.initMessageEvent("message",!1,!1,c,null,null,window,null);return k}else return{type:a,data:c,bubbles:!1,cancelable:!1}},FlashWebSocket.CONNECTING=0,FlashWebSocket.OPEN=1,FlashWebSocket.CLOSING=2,FlashWebSocket.CLOSED=3,FlashWebSocket.__isFlashImplementation=!0,FlashWebSocket.__initialized=!1,FlashWebSocket.__flash=null,FlashWebSocket.__instances={},FlashWebSocket.__tasks=[],FlashWebSocket.__nextId=
0,FlashWebSocket.loadFlashPolicyFile=function(a){FlashWebSocket.__addTask(function(){FlashWebSocket.__flash.loadManualPolicyFile(a)})},FlashWebSocket.__initialize=function(){if(!FlashWebSocket.__initialized){FlashWebSocket.__initialized=!0;if(FlashWebSocket.__swfLocation)window.WEB_SOCKET_SWF_LOCATION=FlashWebSocket.__swfLocation;if(window.WEB_SOCKET_SWF_LOCATION){if(!window.WEB_SOCKET_SUPPRESS_CROSS_DOMAIN_SWF_ERROR&&!WEB_SOCKET_SWF_LOCATION.match(/(^|\/)WebSocketMainInsecure\.swf(\?.*)?$/)&&WEB_SOCKET_SWF_LOCATION.match(/^\w+:\/\/([^\/]+)/)){var a=
RegExp.$1;location.host!=a&&i.error("[WebSocket] You must host HTML and WebSocketMain.swf in the same host ('"+location.host+"' != '"+a+"'). See also 'How to host HTML file and SWF file in different domains' section in README.md. If you use WebSocketMainInsecure.swf, you can suppress this message by WEB_SOCKET_SUPPRESS_CROSS_DOMAIN_SWF_ERROR = true;")}a=document.createElement("div");a.id="webSocketContainer";a.style.position="absolute";FlashWebSocket.__isFlashLite()?(a.style.left="0px",a.style.top=
"0px"):(a.style.left="-100px",a.style.top="-100px");var c=document.createElement("div");c.id="webSocketFlash";a.appendChild(c);document.body.appendChild(a);swfobject.embedSWF(WEB_SOCKET_SWF_LOCATION,"webSocketFlash","1","1","10.0.0",null,null,{hasPriority:!0,swliveconnect:!0,allowScriptAccess:"always"},null,function(a){a.success||i.error("[WebSocket] swfobject.embedSWF failed")})}else i.error("[WebSocket] set WEB_SOCKET_SWF_LOCATION to location of WebSocketMain.swf")}},FlashWebSocket.__onFlashInitialized=
function(){setTimeout(function(){FlashWebSocket.__flash=document.getElementById("webSocketFlash");FlashWebSocket.__flash.setCallerUrl(location.href);FlashWebSocket.__flash.setDebug(!!window.WEB_SOCKET_DEBUG);for(var a=0;a<FlashWebSocket.__tasks.length;++a)FlashWebSocket.__tasks[a]();FlashWebSocket.__tasks=[]},0)},FlashWebSocket.__onFlashEvent=function(){setTimeout(function(){try{for(var a=FlashWebSocket.__flash.receiveEvents(),c=0;c<a.length;++c)FlashWebSocket.__instances[a[c].webSocketId].__handleEvent(a[c])}catch(k){i.error(k)}},
0);return!0},FlashWebSocket.__log=function(a){i.log(decodeURIComponent(a))},FlashWebSocket.__error=function(a){i.error(decodeURIComponent(a))},FlashWebSocket.__addTask=function(a){FlashWebSocket.__flash?a():FlashWebSocket.__tasks.push(a)},FlashWebSocket.__isFlashLite=function(){if(!window.navigator||!window.navigator.mimeTypes)return!1;var a=window.navigator.mimeTypes["application/x-shockwave-flash"];return!a||!a.enabledPlugin||!a.enabledPlugin.filename?!1:a.enabledPlugin.filename.match(/flashlite/i)?
!0:!1},window.WEB_SOCKET_DISABLE_AUTO_INITIALIZATION||swfobject.addDomLoadEvent(function(){FlashWebSocket.__initialize()})})();
